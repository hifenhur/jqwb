<h1>Alertas</h1>
<%= form_tag '/alerts', method: 'get' do%>
    <%= label 'query','agent', "Agente" %>
    <%= select 'query','agent', @agentes.collect{|a| [a.nome, a.id]},{:include_blank => true} %>
    <%= label 'query','monitor', "Monitor" %>
    <%= select 'query','monitor', @monitores.collect{|m| [m.name, m.id]}, {:include_blank => true} %>
    <input type="submit" class="btn" value="Pesquisar"/>

<% end %>
<% if params[:query] %>
  
<% end %>
<table class="table table-hover table-bordered">
  <tr>
    <th>Ver no Mapa</th>
    <th>Inserido</th>
    <th>Placa</th>
    <th>Descrição</th>
    <th>Processado</th>
    <th>Infração</th>
    <th>Status</th>
    <th>Agente</th>
    <th>Monitor</th>
  </tr>


<% @alerts.each do |alert| %>
  <tr>
    <td><a data-target="#myModal" role="button" class="btn" data-toggle="modal" data-remote="alerts/map/<%= alert.id%>">ver localização</a></td>
    <td><%= alert.dh_ins %></td>
    <td><%= alert.plaque %></td>
    <td><%= alert.description %></td>
    <td><%= alert.dh_rx %></td>
    <td><%= alert.cod_infraction %></td>
    <td><%= alert.status %></td>
    <td><%= alert.agent %></td>
    <td><%= alert.monitor %></td>
  </tr>
<% end %>
</table>
<%= will_paginate @alerts %>

<br />

<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Mapa</h3>
  </div>
  <div class="modal-body">
    <p>Carregando...</p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
  </div>
</div>
