<!-- Modal -->
<div id="utility" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal">&times;</button>
    <h1 id="myModalLabel">Mapa</h1>
  </div>
  <div class="modal-body" id="utility_body">
    <p>Carregando</p>
    <img class="loading" src="/assets/loading.gif">
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal">Fechar</button>
  </div>
</div>
<script type="text/javascript">
  $('a[data-toggle="modal"]').on('click', function(){
        // update modal header with contents of button that invoked the modal
        $('#myModalLabel').html( $(this).html() );
        //fixes a bootstrap bug that prevents a modal from being reused
        $('#utility_body').load(
            $(this).attr('href'),
            function(response, status, xhr) {
                if (status === 'error') {
                    //console.log('got here');
                    $('#utility_body').html('<h2>Oh boy</h2><p>Sorry, but there was an error:' + xhr.status + ' ' + xhr.statusText+ '</p>');
                }
                return this;
            }
        );
    });  

  $('#utility').on('hidden', function () {
      $('#utility_body').html('<p>Carregando</p><img class="loading" src="/assets/loading.gif">')
  })
</script>

